#uCore OS Lab2 Report 
 @author 张敬卿 2012011380
 
## 练习一

1. 实现过程
	1. 初始default代码的主要问题在于没有正确的维护free_list
	2. 在init\_mem的时候没有正确的将新的内存块插入到队列末尾，而是放在了队列开头，因此应该讲list\_add改为list\_add\_before
	3. 在malloc的时候剩余内存块被插入了队列开头，而不是之前的队列位置，因此需要记录内存块之前所在的队列位置，然后将剩余的内存块插入回这个位置
	4. 在free的时候将释放的空间插入了队列开头，而不是根据地址顺序的相应位置，因此需要遍历队列，找到相应的位置，然后将释放的内存块插回这个位置
	5. 更改完free_list的维护，练习一即可顺利通过
2. 改进空间
	1. 在free的时候目前用了两次for循环，一次合并一次找到插入位置，可以减少到一次for循环，这可能需要修改一些合并的策略

	
## 练习二
1. 实现过程
	1. 按照pmm.c中给的注释实现
	2. 如果PDE入口存在则直接返回结果，如果不存在且需要创建且创建成功则进行一些初始化后返回，否则返回NULL
2. 请描述页目录项（Pag Director Entry）和页表（Page Table Entry）中每个组成部分的含义和以及对ucore而言的潜在用处。
	1. PDE是一级页表，首位为valid位，后面的位存储的是PTE的基地址
	2. PTE是二级页表，首位为valid位，后面的位存储的是物理内存中相应的基地址
	3. 通过PDE PTE二级页表的机制可以节省页表本身占据的内存空间
3. 如果ucore执行过程中访问内存，出现了页访问异常，请问硬件要做哪些事情？
	1. 硬件需要存储当前寄存器和堆栈的状态，然后将控制权交给操作系统，如果是缺页异常则需要进行换页，然后硬件恢复寄存器和堆栈的状态并重新执行触发异常的语句；如果页访问溢出异常，则需要中断应用进程

## 练习三
1. 实现过程
	1. 按照pmm.c中给的注释实现 
	2. 如果PTE存在，释放PTE并在TLB中清空相应的入口
2. 数据结构Page的全局变量（其实是一个数组）的每一项与页表中的页目录项和页表项有无对应关系？如果有，其对应关系是啥？
	1. PTE对应一个Page，PDE对应的是PTE 